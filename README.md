# FINAL PROJECT README
ê¹€ë‚¨ì¤€ ì„ì§€ëª…

<br/>
<br/>

## ğŸ‘ íŒ€ì› êµ¬ì„± ë° ì—­í•  ë¶„ë‹´ğŸ‘

<table align="center">
    <tr align="center">
          <td style="min-width: 220px;">
            <a href="https://github.com/NamjunKim12">
              <img src="https://github.com/ssafy10-seoul07/PJT6-M/assets/69416561/d19fb382-d4dc-481a-bcd2-a1315d4df247" width="250">
                <br />
              <b>ê¹€ë‚¨ì¤€(íŒ€ì¥)</b>
            </a> 
        </td>
        <td style="min-width: 220px;">
            <a href="https://github.com/jseok0917">
              <img src="https://github.com/ssafy10-seoul07/PJT6-M/assets/69416561/e103b1e7-cbaa-4efe-9cc2-8c15b87b82c6" width="250">
              <br />
              <b>ì„ì§€ëª…</b>
            </a> 
        </td>
    </tr>
    <tr align="left">
        <td>
        0. ğŸ™‹ í”„ë¡ íŠ¸ì—”ë“œ ë¦¬ë”<br>
        <br/>
        </td>
        <td>
        0. ğŸ™‹ ë°±ì—”ë“œ ë¦¬ë”<br> 
        <br/>
        </td>
    </tr>
</table>

<br/>
<br/>

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

<br>

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ ëª©í‘œ

ğŸŸ¢ ì›¹ ì•„í‚¤í…ì²˜ë¥¼ ì´í•´í•˜ê³  ì´ë¥¼ í™œìš©í•˜ì—¬ ì›¹ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ğŸŸ¢ SpringBootì™€ Vueë¥¼ ì´í•´í•˜ê³  í™œìš©í•  ìˆ˜ ìˆë‹¤.

ğŸŸ¢ Rest APIì™€ VueRouterì„ í™œìš©í•˜ì—¬ SPA ë°©ì‹ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.

ğŸŸ¢ ê¸°ì¡´ ê´€í†µ í”„ë¡œì íŠ¸ì— ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì¶”ê°€í•˜ì—¬ ê³¼ì •ì—ì„œ ë°°ìš´ ê¸°ìˆ ë“¤ì„ ë‹¤ì–‘í•˜ê²Œ êµ¬í˜„í•´ ë³¸ë‹¤.

<br>


### 2ï¸âƒ£ ìš”êµ¬ì‚¬í•­

ğŸŸ¢ ê¸°ì¡´ ì§„í–‰í•œ ê´€í†µ í”„ë¡œì íŠ¸ì˜ ìš”êµ¬ì‚¬í•­ì„ ì •ë¦¬í•˜ê³  í˜ì–´ ë³„ë¡œ í”„ë¡œì íŠ¸ì— ì ìš©í•  ì•„ì´ë””ì–´ë¥¼ ì¶”ê°€í•˜ì—¬ Final Projectë¥¼ ì™„ì„±í•œë‹¤.

ğŸŸ¢ SpringBootì™€ MyBatisì—°ë™ì„ í™œìš©í•œ RestAPI ì„œë²„ êµ¬í˜„

ğŸŸ¢ Vue3ë²„ì „ì„ í™œìš©í•œ SPA í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

<br>
<hr>
<br>

## ğŸ“Œ í”„ë¡œì íŠ¸ ì •ë³´ 

### 0ï¸âƒ£ UX

ğŸŸ¢ ì‚¬ë¡€1 : ì¹œêµ¬ë“¤ê³¼ì˜ ì‹¤ë‚´ ì•”ë²½ë“±ë°˜ì„ ì¦ê¸°ëŠ” ì§„ì¢…ì¸(52, ë‚¨) ì”¨

  - ì§„ì¢…ì¸ ì”¨ëŠ” ì¹œêµ¬ë“¤ê³¼ì˜ í´ë¼ì´ë°ì„ ì¦ê¸´ë‹¤.
  - ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ë†€ë ¤ê³  ì‹¤ë‚´ í´ë¼ì´ë° ì•”ì¥ì„ ì°¾ì•„ë³´ë ¤ê³  í•œë‹¤.
  - ë„¤ì´ë²„ ì§€ë„ì•±ì— ë“¤ì–´ê°€ì„œ "í´ë¼ì´ë°"ìœ¼ë¡œ ê²€ìƒ‰í•œë‹¤.
  - ì•”ì¥ì˜ ìœ„ì¹˜ì™€ ê°„ëµí•œ ì •ë³´ëŠ” ë‚˜ì™€ìˆì§€ë§Œ, í•´ë‹¹ ì•”ì¥ì— ì£¼ì°¨ì¥ì´ ìˆëŠ”ì§€,
  ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ê°ˆ ì •ë„ë¡œ ë„“ì€ì§€, ìƒ¤ì›Œì‹¤ì´ ìˆëŠ”ì§€ ë“±ì˜
  ìì„¸í•œ ì •ë³´ë“¤ì€ ë‚˜ì™€ìˆì§€ ì•Šë‹¤.
  
  => ì•”ì¥ë“¤ì˜ ìƒì„¸ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì´ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤.

<br>

ğŸŸ¢ ì‚¬ë¡€2 : í´ë¼ì´ë°ì´ ì·¨ë¯¸ì¸ ì´ì§€ì€(42, ì—¬) ì”¨

  - ì´ì§€ì€ ì”¨ëŠ” íƒœìƒì´ í´ë¼ì´ë¨¸ë‹¤.
  - ì¼ì£¼ì¼ì— 3ë²ˆ ì´ìƒ í´ë¼ì´ë°ì„ í•˜ëŸ¬ ë‹¤ë‹Œë‹¤.
  - ì£¼ë³€ í´ë¼ì´ë° ì•”ì¥ì€ ëª¨ë‘ ì •ë³µí•˜ì—¬, ë‹¤ë¥¸ ì•”ì¥ë“¤ì„ ì°¾ìœ¼ëŸ¬ ë‹¤ë‹Œë‹¤.
  - í´ë¼ì´ë° ê³ ì¸ë¬¼ì¸ ì´ì§€ì€ ì”¨ëŠ” ì¢€ ì–´ë ¤ìš´ ë‚œì´ë„ì˜ ì•”ì¥ì„ ì°¾ê³ ì‹¶ë‹¤.
  - ë„¤ì´ë²„ ì§€ë„ë¥¼ í†µí•´ì„œëŠ” ì•”ì¥ë“¤ì˜ ë‚œì´ë„ë„ ì•Œê¸° ì–´ë µê³ , ë¦¬ë·°ë“¤ë„ ì£¼ê´€ì ì´ë¼ 
  ì¸ìŠ¤íƒ€ê·¸ë¨, ë„¤ì´ë²„ ë¸”ë¡œê·¸, ì¸í„°ë„· ì»¤ë®¤ë‹ˆí‹° ë“±ì„ í†µí•´ ì•”ì¥ ì •ë³´ë¥¼ ì¼ì¼ì´ ì°¾ì•„ë´ì•¼í•œë‹¤.
  - ìœ ì¼í•œ í´ë¼ì´ë° ì–´í”Œì—ì„œëŠ” ìì‹ ì´ ë°©ë¬¸í•œ ì•”ì¥ ê¸°ë¡ì€ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ,
    ì•”ì¥ë“¤ì˜ ìƒì„¸í•œ ì •ë³´ëŠ” ì•Œê¸° ì–´ë µë‹¤.
  - ë˜í•œ, ë‹¤ë…€ì™”ë˜ ì•”ì¥ë“¤ì˜ êµ¬ì—­ í™€ë“œê°€ ë³€ê²½ ëìœ¼ë©´ ê°€ë ¤ê³  í•˜ëŠ”ë°,
  ì•”ì¥ë“¤ì˜ ì „í™”ë²ˆí˜¸ë¥¼ ì¼ì¼ì´ ì°¾ì•„ ì—°ë½í•˜ê¸°ê°€ ê·€ì°®ë‹¤. 
  
  => ì•”ì¥ì˜ ìƒì„¸í•œ ì •ë³´ë“¤ê³¼ ì—°ë½ì²˜ë“¤ì„ í•œ ë° ëª¨ì•„ë‘” ê³³ì´ ìˆê³ ,
  ê°±ì‹ ëœ ì •ë³´ ë“±ì„ ë°”ë¡œë°”ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ê°€ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤.
  ë˜, ì •ë³´ì™€ í•¨ê»˜ í´ë¼ì´ë°ì„ ì¦ê¸°ëŠ” ì‚¬ëŒë“¤ì´ ì“´ ë¦¬ë·°ë“¤ ìœ„ì£¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ”
  ì»¤ë®¤ë‹ˆí‹° ì„œë¹„ìŠ¤ê°€ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤.



<br>

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ ëª©í‘œ

ğŸŸ¢ í´ë¼ì´ë° ì•”ì¥ì˜ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.

  - ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì´ìš©í•œ ì•”ì¥ ê²€ìƒ‰ ê¸°ëŠ¥ ë° ì£¼ë³€ ì•”ì¥ ì¡°íšŒ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.
  - ì•”ì¥ ìƒì„¸ë³´ê¸° ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
  - ì•”ì¥ ìƒì„¸ í˜ì´ì§€ì—ì„œ ë¦¬ë·° ì¡°íšŒ ë° ì‘ì„±, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.
  - ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë° ë§ˆì´í˜ì´ì§€ë¥¼ êµ¬í˜„í•œë‹¤.

<br>
<br>

### 2ï¸âƒ£ í˜ì´ì§€ ì •ì˜ì„œ & ì™€ì´ì–´í”„ë ˆì„

<img src="https://github.com/jseok0917/jseok0917/assets/139304962/bf23f389-aab4-4010-8078-18a66bb709ab" style="width : 700px" />
<img src="https://github.com/jseok0917/jseok0917/assets/139304962/4bbd2495-ab13-4662-bffb-86be3ed90fe5" style="width : 700px"/>

<br>
<br>

### 3ï¸âƒ£ í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ ì •ì˜ì„œ 

<img src="https://github.com/jseok0917/jseok0917/assets/139304962/527f4131-5121-4bc2-8469-92077b96fb5c" style="width : 900px"/>

<br>
<br>

### 4ï¸âƒ£ í™”ë©´ ì„¤ê³„ì„œ

<img src="https://github.com/jseok0917/jseok0917/assets/139304962/34863f44-d0cb-43ec-b7e7-a57f852dac92" style="width : 900px"/>

<img src="https://github.com/jseok0917/jseok0917/assets/139304962/a746c2b0-648f-4ab6-9fb2-888243b2b4c5" style="width : 900px"/>

<br>
<hr>
<br>

### 5ï¸âƒ£ í´ë” êµ¬ì¡°

ğŸŸ¢ í”„ë¡ íŠ¸ì—”ë“œ í´ë” êµ¬ì¡°

![frontFolderStructure](https://github.com/jseok0917/jseok0917/assets/139304962/1e2c3be1-492b-4237-a354-54f52c3cab66)

<br>
<br>

ğŸ”´ ë°±ì—”ë“œ í´ë” êµ¬ì¡°

![backFolderStructure](https://github.com/jseok0917/jseok0917/assets/139304962/6672802e-512f-4abd-b00a-2bc3a187d716)

<br>
<hr>
<br>


## ğŸ“Œ í”„ë¡œì íŠ¸_ë°±ì—”ë“œ ëª©í‘œ

ğŸŸ¢ ì›¹ ì•„í‚¤í…ì²˜ë¥¼ ì´í•´í•˜ê³  ì´ë¥¼ í™œìš©í•˜ì—¬ ì›¹ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ê³  êµ¬í˜„

ğŸŸ¢ SpringBootì™€ MyBatisì—°ë™ì„ í™œìš©í•œ RestAPI ì„œë²„ êµ¬í˜„

<br>
<hr>
<br>

## ğŸ“Œ í”„ë¡ íŠ¸ì—”ë“œ íŒŒíŠ¸ êµ¬ì„±ë„

![frontend_structure](https://github.com/jseok0917/jseok0917/assets/139304962/c429f54e-b6c6-4dd3-975e-09e1cfa2b232)

<br>
<hr>
<br>

## ğŸ“Œ í”„ë¡œì íŠ¸_ë°±ì—”ë“œ êµ¬í˜„ ê²°ê³¼

### 1ï¸âƒ£ ì‘ì„±í•œ ERDì™€ MySQLì„ ì´ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬í˜„í•œë‹¤.

  ğŸŸ¢ E-R Diagram

  ![ERD DIAGRAM](https://github.com/jseok0917/jseok0917/assets/139304962/0ee86420-36e6-4b61-a05d-f295d9b10a9c)
  
  ğŸŸ¢ ì£¼ì–´ì§„ ERDë¥¼ í†µí•´ MySQLë¡œ DB ë° í…Œì´ë¸”ì„ ì‘ì„±í•œë‹¤.

```SQL
CREATE SCHEMA allclimbing;

USE allclimbing;

DROP TABLE IF EXISTS `user`;
DROP TABLE IF EXISTS `gym`;
DROP TABLE IF EXISTS `review`;
DROP TABLE IF EXISTS `likedgym`;


CREATE TABLE IF NOT EXISTS `user`(
  `userId` varchar(45) CHARACTER SET utf8mb4 NOT NULL,
  `password` varchar(45) CHARACTER SET utf8mb4 NOT NULL DEFAULT '',
  `email` varchar(100) CHARACTER SET utf8mb4 NOT NULL UNIQUE DEFAULT '',
  `nickname` varchar(45) CHARACTER SET utf8mb4 NOT NULL DEFAULT '',
  `instagram` varchar(45) CHARACTER SET utf8mb4 DEFAULT '',
  `grade` int(12) NOT NULL DEFAULT '0',
  PRIMARY KEY (`userId`)
);

CREATE TABLE IF NOT EXISTS `gym`(
  `gymId` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
  `gymAddress` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
  `gymName` varchar(60) CHARACTER SET utf8mb4 NOT NULL,
  `gymImgURL` varchar(2000) CHARACTER SET utf8mb4,
  `operationTime` varchar(45) CHARACTER SET utf8mb4,
  `area` int(30) NOT NULL,
  `contact` varchar(60) CHARACTER SET utf8mb4,
  `shower` boolean NOT NULL,
  `parking` boolean NOT NULL,
  `tutoring` boolean  NOT NULL,
  `homepage` varchar(45) CHARACTER SET utf8mb4,
  `detail` varchar(2000) CHARACTER SET utf8mb4,
  
  PRIMARY KEY (`gymId`)
);

CREATE TABLE IF NOT EXISTS `review`(
  `reviewNo` int(52) AUTO_INCREMENT NOT NULL,
  `gymId` varchar(45) CHARACTER SET utf8mb4 NOT NULL,
  `userId` varchar(45) CHARACTER SET utf8mb4 NOT NULL DEFAULT '',
  `reviewImgURL` varchar(500) CHARACTER SET utf8mb4,
  `originalFileName` varchar(500) CHARACTER SET utf8mb4,
  `saveFileName` varchar(500) CHARACTER SET utf8mb4,
  `content` varchar(200) CHARACTER SET utf8mb4 NOT NULL DEFAULT '',
  `visitDate` DATE NOT NULL,
  `regDate` TIMESTAMP DEFAULT now() ,
  PRIMARY KEY (`reviewNo`),
  CONSTRAINT `gym_ibfk_1` FOREIGN KEY (`gymId`) REFERENCES `gym` (`gymId`),
  CONSTRAINT `user_ibfk_1` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`)
);

CREATE TABLE IF NOT EXISTS `likedgym`(
  `userId` varchar(45) CHARACTER SET utf8mb4 NOT NULL,
  `gymId` varchar(45) CHARACTER SET utf8mb4 NOT NULL,
  PRIMARY KEY (`userId`, `gymId`),
  FOREIGN KEY (`userId`) REFERENCES `user` (`userId`),
  FOREIGN KEY (`gymId`) REFERENCES `gym` (`gymId`)
);

```

<br>
<br>

  ğŸŸ¢ ì¹´ì¹´ì˜¤ë§µ APIë¥¼ í™œìš©í•˜ì—¬ í´ë¼ì´ë° ì•”ì¥ ë°ì´í„°ë“¤ì„ ëª¨ë‘ í¬ë¡¤ë§í•˜ì—¬ DBì— ì§‘ì–´ë„£ëŠ”ë‹¤. ìœ ì € ë° ë¦¬ë·°, ì°œ ë°ì´í„°ëŠ” ë”ë¯¸ë°ì´í„°ë¡œ ë„£ì–´ë†“ëŠ”ë‹¤.

ğŸ”¹ í´ë¼ì´ë° ì•”ì¥ í…Œì´ë¸”(ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì´ìš©í•œ í¬ë¡¤ë§)
![gymDB](https://github.com/jseok0917/jseok0917/assets/139304962/2f9ac2a9-7568-4e6f-ad19-bff7d73b6367)
<br><br>
ğŸ”¹ ë¦¬ë·° í…Œì´ë¸”
![reviewDB](https://github.com/jseok0917/jseok0917/assets/139304962/2a12c37d-052d-4f6b-aa47-9e734238216c) <br><br>
ğŸ”¹ ìœ ì € í…Œì´ë¸” / ìì£¼ê°€ëŠ”ì•”ì¥ ì¤‘ê³„ í…Œì´ë¸” <br><br>
![userDB](https://github.com/jseok0917/jseok0917/assets/139304962/5ced21e0-2ae0-40bb-95c0-9fdbd4c74b3e)
![likedgym](https://github.com/jseok0917/jseok0917/assets/139304962/7037c305-43c9-48f2-a79c-18039ed3edc2)

<br>
<br>


### 2ï¸âƒ£ SpringBootë¥¼ í™œìš©í•˜ì—¬ MVCíŒ¨í„´ì„ ì„¤ê³„í•˜ê³ , DBì™€ ì„œë²„ë¥¼ ì—°ê²°í•œë‹¤.

  ğŸŸ¢ Spring Starter Projectë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•œë‹¤. 
    - Type : maven
    - Java Version : 8
    - Spring Boot Version : 2.7.17
    - dependencies : Spring Boot DevTools, Spring Web Services, MyBatis Framework, MySQL Driver, 
                    SpringFox Swagger UI(springfox-boot-starter), Java JWT

  
  ğŸŸ¢ applicaition.properties, Configurationì„ ì‘ì„±í•˜ì—¬ Spring Bootë¥¼ ì‚¬ìš©í•˜ê³  DBì™€ ì—°ê²°í•˜ê¸° ìœ„í•œ ì„¤ì •ì„ ì§„í–‰í•œë‹¤.

    ğŸ”¹ applicaition.properties <br>
    ğŸ”¹ DBconfig <br>
    ğŸ”¹ WebConfig & SwaggerConfig
```xml 
# dataSource
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/allclimbing?serverTimezone=UTC
spring.datasource.username=ssafy
spring.datasource.password=ssafy

	
# mybatis
mybatis.mapper-locations=classpath*:mappers/*.xml
mybatis.type-aliases-package=com.ssafy.climbing.model.dto
```
<br>

```java
//DBconfig

@Configuration
@MapperScan(basePackages = "com.ssafy.climbing.model.dao")
public class DBConfig {
}
```

```java

//WebConfig

@Override
	public void addResourceHandlers(ResourceHandlerRegistry registry) {
		registry.addResourceHandler("/**").addResourceLocations("classpath:/static/");

		registry.addResourceHandler("/swagger-ui/**")
				.addResourceLocations("classpath:/META-INF/resources/webjars/springfox-swagger-ui/");
	}

// SwaggerConfig
@EnableSwagger2
public class SwaggerConfig {
	@Bean
	public Docket api() {
		return new Docket(DocumentationType.SWAGGER_2)
				.select()
				.apis(RequestHandlerSelectors.basePackage("com.ssafy.climbing.model.controller"))
				.paths(PathSelectors.ant("/api*/**"))
				.build()
				.apiInfo(apiInfo());
	}
	
	private ApiInfo apiInfo() {
		return new ApiInfoBuilder()
				.title("SSAFY_ìµœì¢…PJT_ì˜¬í´ë¼ì´ë°")
				.description("7ë°˜ ê¹€ë‚¨ì¤€ & ì„ì§€ëª…")
				.version("0.1")
				.build();
	}
}
```
<br>
<br>  

### 3ï¸âƒ£ MVCíŒ¨í„´ì„ ìœ„í•œ í´ë˜ìŠ¤ ì„¤ê³„ë„(UML Class Diagram)

![í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨](https://github.com/jseok0917/jseok0917/assets/139304962/a6d6ec61-ada7-43b5-84d9-b90ac0656653)

<br>
<br>


### 4ï¸âƒ£ DTO, DAO, MAPPER ìˆœìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , MyBatisë¥¼ ì—°ë™í•˜ì—¬ DBì™€ ì„œë²„ë¥¼ ì—°ê²°í•œë‹¤.

  ğŸŸ¢ DTO(Gym, Review, User í´ë˜ìŠ¤)ë¥¼ ì‘ì„±í•œë‹¤. (Getter, Setter íŒŒíŠ¸ ìƒëµ)

```java
//Gym DTO
public class Gym {
	private String gymId;
	private String gymImgURL;
	private String gymName;
	private String gymAddress;
	private String operationTime;
	private int area;
	private String contact;
	private boolean shower;
	private boolean parking;
	private boolean tutoring;
	private String homepage;
	private String detail;
}

//Review DTO
public class Review {
	private int reviewNo; 
	private String gymId;
	private String userId;
	private String reviewImgURL;
	private String originalFileName;
	private String saveFileName;
	private String content;
	private String visitDate;
	private String regDate; 
}


//User DTO
public class User {
	private String userId;
	private String password;
	private String email;
	private String nickname;
	private String instagram;
}

```

<br>
<br>

  ğŸŸ¢ DAO(GymDao, ReviewDao, UserDao í´ë˜ìŠ¤)ë¥¼ ì‘ì„±í•œë‹¤.

```java
//GymDao
public interface GymDao {
	
	//ì•”ì¥ ëª©ë¡ ì¡°íšŒ
	List<Gym> selectAllGym();
	
	//ì•”ì¥ 1ê°œ ì¡°íšŒ
	Gym selectOneGym(String gymId);
	
	//í•œ ìœ ì €ê°€ ìì£¼ê°€ëŠ” ì•”ì¥ ëª©ë¡ ì¡°íšŒ
	List<Gym> selectFavoriteGym(String userId);
	
	//ì•”ì¥ ë°ì´í„°ë² ì´ìŠ¤ ì‚½ì…
	int insertGym(Gym gym);
	
	//ì•”ì¥ ì •ë³´ ì—…ë°ì´íŠ¸
	int updateGym(Gym gym);
	
	//ì•”ì¥ ì°œ ì²´í¬ìš©
	Keyword checkFavoriteGym(@Param("userId") String userId, @Param("gymId") String gymId);

	//ì•”ì¥ ì°œ ê¸°ëŠ¥
	int addFavoriteGym(Keyword keyword);

	//ì•”ì¥ ì°œ í•´ì œ ê¸°ëŠ¥
	int deleteFavoriteGym(Keyword keyword);
}

//ReviewDao
public interface ReviewDao {

	// ë¦¬ë·° ë“±ë¡
	int insertReview(Review review);

	// í•´ë‹¹ ì•”ì¥ì˜ ë¦¬ë·°ë“¤ ì¡°íšŒ
	List<Review> selectGymReview(String gymId);
	
	// ìœ ì €ê°€ ì“´ ë¦¬ë·°ë“¤ ëª¨ë‘ ì¡°íšŒ
	List<Review> selectUserReview(String userId);

	// ë¦¬ë·° í•œê°œ ì¡°íšŒ
	Review selectOneReview(@Param("reviewNo") int reviewNo);
 
	// ë¦¬ë·° ìˆ˜ì •
	int updateReview(Review review);

	// ë¦¬ë·° ì‚­ì œ
	int deleteReview(@Param("reviewNo") int reviewNo);

}


//UserDao
public interface UserDao {

	// ìœ ì € ìƒì„±
	int insertUser(User user);

	// ìœ ì € ìˆ˜ì •
	int updateUser(User user);

	// ìœ ì € ì‚­ì œ
	int deleteUser(String userId);

	// ìœ ì € ì¡°íšŒ
	User selectOneUser(String userId);
	
	// ìœ ì € ëª©ë¡ ì¡°íšŒ
	List<User> selectAllUser();
}

```

<br>
<br>

  ğŸŸ¢ ë§ˆì§€ë§‰ìœ¼ë¡œ Mappers(GymMapper, ReviewMapper, UserMapper)ì„ ì‘ì„±í•˜ì—¬ DBì™€ ì„œë²„ì˜ ì—°ë™ì„ ì™„ë£Œí•œë‹¤.

```xml
<!-- GymMapper.xml -->
<mapper namespace="com.ssafy.climbing.model.dao.GymDao">

	<!-- ì•”ì¥ ëª©ë¡ ì¡°íšŒ -->
	<select id = "selectAllGym" resultType = "Gym">
		SELECT *
		FROM gym
	</select>
	
	
	<!-- ì•”ì¥ 1ê°œ ì¡°íšŒ -->
	<select id ="selectOneGym" resultType = "Gym" parameterType = "String">
		SELECT *
		FROM gym
		WHERE gymId = #{gymId}
	</select>
	
	
	<!-- ìì£¼ê°€ëŠ” ì•”ì¥ëª©ë¡ ì¡°íšŒ -->
	<select id="selectFavoriteGym" resultType="Gym" parameterType="String">
		SELECT v.gymId, v.gymAddress, v.gymName, v.gymImgURL, v.operationTime, v.area, v.contact, v.shower, v.parking, v.tutoring, v.homepage, v.detail FROM 
		gym v JOIN likedgym u ON v.gymId = u.gymId
		WHERE u.userId = #{userId}
	
	</select>
	
	<!-- ì•”ì¥ DBì— ì¶”ê°€ -->
	<insert id="insertGym" parameterType="Gym">
		INSERT IGNORE INTO `gym` (gymId, gymName, gymAddress, operationTime, area, contact, shower, parking, tutoring, homepage, detail)
		VALUES 
			(#{gymId}, #{gymName}, #{gymAddress}, #{operationTime}, #{area}, #{contact}, #{shower}, #{parking}, #{tutoring}, #{homepage}, #{detail});
	</insert>
	
	<!-- ì•”ì¥ ì •ë³´ ì—…ë°ì´íŠ¸ -->
	<update id="updateGym" parameterType="Gym">
		UPDATE `gym` 
		SET gymName = #{gymName},gymAddress = #{gymAddress}
		,operationTime = #{operationTime},area = #{area}
		,contact = #{contact},shower = #{shower}, parking = #{parking}
		,tutoring = #{tutoring},homepage = #{homepage}, detail =  #{detail}
		WHERE gymId = #{gymId}
	</update>
	
	<!-- ì•”ì¥ ì°œ ì²´í¬ -->
	<select id="checkFavoriteGym" resultType="Keyword">
		SELECT * FROM `likedgym`
		WHERE gymId = #{gymId} AND userId = #{userId} 
	</select>
	
	<!-- ì•”ì¥ ì°œ ê¸°ëŠ¥ -->
	<insert id="addFavoriteGym" parameterType="Keyword">
		INSERT INTO `likedgym` (userId, gymId)
		VALUES
			(#{userId}, #{gymId});
	</insert>
	
	<!-- ì•”ì¥ ì°œ í•´ì œ ê¸°ëŠ¥ -->
	<delete id="deleteFavoriteGym" parameterType="Keyword">
		DELETE FROM `likedgym`
		WHERE gymId = #{gymId} AND userId = #{userId}
	</delete>

</mapper>


<!-- ReviewMapper.xml -->
<mapper namespace="com.ssafy.climbing.model.dao.ReviewDao">
	
	<insert id="insertReview" parameterType="Review">
		INSERT INTO review (gymId, userId, reviewImgURL, originalFileName, saveFileName, content, visitDate, regDate)
		VALUES
			(#{gymId}, #{userId}, #{reviewImgURL}, #{originalFileName}, #{saveFileName}, #{content}, #{visitDate}, NOW());
	</insert>
	
	<select id="selectGymReview" resultType="Review" parameterType="String">
		SELECT *
		FROM review
		WHERE gymId = #{gymId};
	</select>
	
	<select id="selectUserReview" resultType="Review" parameterType="String">
		SELECT *
		FROM review
		WHERE userId = #{userId};
	</select>
	
	<select id="selectOneReview" resultType="Review">
		SELECT *
		FROM review
		WHERE reviewNo = #{reviewNo};
	</select>
	
	<update id="updateReview" parameterType="Review">
		UPDATE review
		SET content = #{content}
		WHERE reviewNo = #{reviewNo};
	</update>
	
	<delete id="deleteReview">
		DELETE FROM review
		WHERE reviewNo = #{reviewNo};
	</delete>
	
</mapper>


<!-- UserMapper.xml -->
<mapper namespace="com.ssafy.climbing.model.dao.UserDao">
	 <!-- ìœ ì € ìƒì„± -->
    <insert id="insertUser" parameterType="User">
        INSERT INTO user (userId, password, email, nickname, instagram)
        VALUES (#{userId}, #{password}, #{email}, #{nickname}, #{instagram});
        WHERE NOT EXISTS (SELECT * FROM user WHERE userId = #{userId});
    </insert>

    <!-- ìœ ì € ìˆ˜ì • -->
    <update id="updateUser" parameterType = "User">
        UPDATE user
        SET password = #{password} AND email = #{email} AND nickname = #{nickname} AND instagram = #{instagram}
        WHERE userId = #{userId};
    </update>

    <!-- ìœ ì € ì‚­ì œ -->
    <delete id="deleteUser">
        DELETE FROM user
        WHERE userId = #{userId};
    </delete>

    <!-- ìœ ì € ì¡°íšŒ -->
    <select id="selectOneUser" resultType="User" parameterType="String">
        SELECT *
        FROM user
        WHERE userId = #{userId};
    </select>
    
    <!-- ìœ ì € ëª©ë¡ ì¡°íšŒ -->
    <select id="selectAllUser" resultType="User">
        SELECT *
        FROM user;
    </select>

</mapper>

```

<br>
<br>

### 5ï¸âƒ£ Service, Controller ë¥¼ ëª¨ë‘ êµ¬í˜„í•˜ì—¬ RESTAPI ì„œë²„ë¡œ í•µì‹¬ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

ğŸŸ¢ Service(GymService, ReviewService, UserService í´ë˜ìŠ¤)ë¥¼ ì‘ì„±í•œë‹¤. - ì½”ë“œ ìƒëµ

ğŸŸ¢ Controller(GymController, ReviewController)ë¥¼ ì‘ì„±í•˜ì—¬ í•µì‹¬ ê¸°ëŠ¥ì„ ìš°ì„ ì ìœ¼ë¡œ êµ¬í˜„í•œë‹¤. <br>
    @RestController, @Get/Post/Put/Delete+Mapping @RequestBody ë“± Annotationì„ ì´ìš©í•˜ì—¬ RESTAPI ì„œë²„ë¥¼ êµ¬í˜„í•œë‹¤. <br>
    UserControllerëŠ” í•µì‹¬ê¸°ëŠ¥ API í…ŒìŠ¤íŠ¸ í›„ Jwtí† í°ì„ ì´ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œì™€ í˜‘ì—…í•˜ì—¬ ì‘ì„±í•  ì˜ˆì •

```java
//GymController
@RestController
@RequestMapping("/api/gym")
@Api(tags="ì•”ì¥ ì»¨íŠ¸ë¡¤ëŸ¬")
@CrossOrigin("*")
public class GymController  {
	
	@Autowired
	private GymService gService;
	
	@Autowired
	private UserService uService;
	
	@Autowired
	private ReviewService rService;
	
	@GetMapping("/list")
	@ApiOperation(value="ì•”ì¥ ëª©ë¡ ì¡°íšŒ")
	public ResponseEntity<?> allGymList(){
		List<Gym> gymList = gService.selectAllGym();
		return new ResponseEntity<List<Gym>>(gymList, HttpStatus.OK);
	}
	
	@GetMapping("/list/{userId}")
	@ApiOperation(value="ìì£¼ê°€ëŠ” ì•”ì¥ ëª©ë¡ ì¡°íšŒ")
	public ResponseEntity<?> favoriteGymList(@PathVariable String userId){
		List<Gym> gymList = gService.selectFavoriteGym(userId);
		return new ResponseEntity<List<Gym>>(gymList, HttpStatus.OK);
	}
	
	@GetMapping("/{gymId}")
	@ApiOperation(value="ì•”ì¥ ìƒì„¸ì¡°íšŒ")
	public ResponseEntity<?> selectGym(@PathVariable String gymId){
		Gym gym = gService.selectOneGym(gymId);
		return new ResponseEntity<Gym>(gym, HttpStatus.OK);
	}
	
	
	@PostMapping("/insert")
	@ApiOperation(value="ì•”ì¥ ì •ë³´ì‚½ì…")
	public ResponseEntity<?> insertGym(@RequestBody Gym gym){
		int result = gService.insertGym(gym);
		if (result == 0) {
			return new ResponseEntity<Void>(HttpStatus.BAD_REQUEST);
		}
		return new ResponseEntity<Void>(HttpStatus.ACCEPTED);
	}
	
	@PutMapping("/update")
	@ApiOperation(value="ì•”ì¥ ì •ë³´ì—…ë°ì´íŠ¸")
	public ResponseEntity<?> updateGym(@RequestBody Gym gym){
		System.out.println(gym.toString());
		int result = gService.updateGym(gym);
		if (result == 0) {
			return new ResponseEntity<Void>(HttpStatus.BAD_REQUEST);
		}
		return new ResponseEntity<Void>(HttpStatus.ACCEPTED);
	}
	
	
	@PostMapping("/favorite")
	@ApiOperation(value="ì•”ì¥ ì°œ ì²´í¬ìš©")
	public ResponseEntity<?> checkFavoriteGym(@RequestBody Keyword keyword){
		Keyword resultType = gService.checkFavoriteGym(keyword.getUserId(), keyword.getGymId());
		if (resultType == null) {
			return new ResponseEntity<Boolean>(false, HttpStatus.OK);
		}
		System.out.println(resultType.toString());
		return new ResponseEntity<Boolean>(true, HttpStatus.ACCEPTED);
	}
	
	
	@PostMapping("/favorite/{gymId}")
	@ApiOperation(value="ì•”ì¥ ì°œ")
	public ResponseEntity<?> addFavoriteGym(@RequestBody Keyword keyword){
		int result = gService.addFavoriteGym(keyword);
		if (result == 0) {
			return new ResponseEntity<Integer>(result, HttpStatus.BAD_REQUEST);
		}
		return new ResponseEntity<Integer>(result, HttpStatus.ACCEPTED);
	}
	
	@PostMapping("/favorite/delete")
	@ApiOperation(value="ì•”ì¥ ì°œ í•´ì œ")
	public ResponseEntity<?> deleteFavoriteGym(@RequestBody Keyword keyword){
		System.out.println("ì°œí•´ì œ?"+keyword.toString());
		int result = gService.deleteFavoriteGym(keyword);
		if (result == 0) {
			return new ResponseEntity<Integer>(result, HttpStatus.NOT_ACCEPTABLE);
		}
		return new ResponseEntity<Integer>(result, HttpStatus.ACCEPTED);
	}
	
}


//ReviewController
@RestController
@RequestMapping("/api/review")
@Api(tags="ë¦¬ë·° ì»¨íŠ¸ë¡¤ëŸ¬")
@CrossOrigin("*")
public class ReviewController  {
	
	@Autowired
	private GymService vService;
	
	@Autowired
	private UserService uService;
	
	@Autowired
	private ReviewService rService;
	
	private SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

	//=======================ë¦¬ë·°íŒŒíŠ¸ CURD êµ¬í˜„===========================
	@GetMapping("/{gymId}")
	@ApiOperation(value="ì•”ì¥ ë¦¬ë·° ì¡°íšŒ")
	public ResponseEntity<List<Review>> gymReviewlist(@PathVariable String gymId){
		List<Review> reviewList = rService.getGymReview(gymId);
		return new ResponseEntity<List<Review>>(reviewList, HttpStatus.OK);
	}
	
	@GetMapping("/list/{userId}")
	@ApiOperation(value="ìœ ì € ë¦¬ë·° ì¡°íšŒ")
	public ResponseEntity<List<Review>> userReviewlist(@PathVariable String userId){
		List<Review> reviewList = rService.getUserReview(userId);
		return new ResponseEntity<List<Review>>(reviewList, HttpStatus.OK);
	}
	
	@GetMapping("/select/{reviewNo}")
	@ApiOperation(value="ë¦¬ë·° í•œê°œ ì¡°íšŒ")
	public ResponseEntity<?> selectOneReview(@PathVariable int reviewNo){
		Review review = rService.getOneReview(reviewNo);
		if (review == null) {
			return new ResponseEntity<Void>(HttpStatus.BAD_REQUEST);
		}
		return new ResponseEntity<Review>(review, HttpStatus.OK);
	}
	
	@PostMapping("/write")
	@ApiOperation(value="ë¦¬ë·° ì‘ì„±")
		public ResponseEntity<Void> write(@RequestPart(value="image", required = false) MultipartFile file, @RequestPart("review") Review review){
		
		//íŒŒì¼ì´ ì¡´ì¬í•˜ê³  ê°€ì§œíŒŒì¼ì´ ì•„ë‹ë•Œë§Œ
		if (file != null && file.getSize() > 0) {
			String uploadPath = "C:\\uploadTemp";
			
			File folder = new File(uploadPath);
			if (!folder.exists()) {
				folder.mkdir();
			}
			
			
			//ì‘ì„±ì¼ê¹Œì§€ë§Œ ë¶ˆëŸ¬ì˜¨ë‹¤
			String writtenDay = sdf.format(System.currentTimeMillis());
			
			//ì‘ì„±ì¼ í´ë”ê°€ ì—†ë‹¤ë©´ í´ë” ìƒì„±
			//ì €ì¥ë  í´ë”ê²½ë¡œ
			String saveFolder = uploadPath+"/"+writtenDay;
			folder = new File(saveFolder);
			if (!folder.exists()) {
				folder.mkdir();
			}
		
			
			//ì‹¤ì œ íŒŒì¼ì´ë¦„ì„ ê°€ì ¸ì™€
			//ê¸°ì¡´ íŒŒì¼ì´ë¦„
			String originalFileName = file.getOriginalFilename();
			int nameLength = originalFileName.length();
			//ì €ì¥ë  íŒŒì¼ì´ë¦„
			UUID uuid = UUID.randomUUID();
			String saveFileName = uuid.toString()+originalFileName.substring(nameLength-4, nameLength);
			
			// íŒŒì¼ Dto ìƒì„±í•˜ì—¬ ìš°ì„  ê²½ë¡œë§Œ
			// DAOë¥¼ í†µí•´ ì €ì¥
			review.setReviewImgURL(saveFolder);
			review.setOriginalFileName(originalFileName);
			review.setSaveFileName(saveFileName);
			
			File target = new File(saveFolder, saveFileName);

			//targetì— fileë³µì‚¬
			try {
				FileCopyUtils.copy(file.getBytes(), target);
			} catch (IOException e) {
				System.out.println("ì™œ ì˜ˆì™¸ë¡œë“¤ì–´ì˜¤ëŠ”ê±°ì§€");
				e.printStackTrace();
			}
			
		}
		
		int result = rService.writeReview(review);
		if (result == 0) {
			return new ResponseEntity<Void>(HttpStatus.BAD_REQUEST);
		}
		return new ResponseEntity<Void>(HttpStatus.ACCEPTED);
	}

	
	@PutMapping("/update")
	@ApiOperation(value="ë¦¬ë·° ìˆ˜ì •")
	public ResponseEntity<Void> update(@RequestPart(value="image", required = false) MultipartFile file, @RequestPart("review") Review review){
		if (file != null && file.getSize() > 0) {
			String uploadPath = "C:\\uploadTemp";
			
			File folder = new File(uploadPath);
			if (!folder.exists()) {
				folder.mkdir();
			}
			
			
			//ì‘ì„±ì¼ê¹Œì§€ë§Œ ë¶ˆëŸ¬ì˜¨ë‹¤
			String writtenDay = sdf.format(System.currentTimeMillis());
			System.out.println(writtenDay);
			
			//ì‘ì„±ì¼ í´ë”ê°€ ì—†ë‹¤ë©´ í´ë” ìƒì„±
			//ì €ì¥ë  í´ë”ê²½ë¡œ
			String saveFolder = uploadPath+"/"+writtenDay;
			folder = new File(saveFolder);
			if (!folder.exists()) {
				folder.mkdir();
			}
		
			
			//ì‹¤ì œ íŒŒì¼ì´ë¦„ì„ ê°€ì ¸ì™€
			//ê¸°ì¡´ íŒŒì¼ì´ë¦„
			String originalFileName = file.getOriginalFilename();
			int nameLength = originalFileName.length();
			//ì €ì¥ë  íŒŒì¼ì´ë¦„
			UUID uuid = UUID.randomUUID();
			String saveFileName = uuid.toString()+originalFileName.substring(nameLength-4, nameLength);
			
			// íŒŒì¼ Dto ìƒì„±í•˜ì—¬ ìš°ì„  ê²½ë¡œë§Œ
			// DAOë¥¼ í†µí•´ ì €ì¥
			review.setReviewImgURL(saveFolder);
			review.setOriginalFileName(originalFileName);
			review.setSaveFileName(saveFileName);
			
			File target = new File(saveFolder, saveFileName);

			//targetì— fileë³µì‚¬
			try {
				FileCopyUtils.copy(file.getBytes(), target);
			} catch (IOException e) {
				System.out.println("ì™œ ì˜ˆì™¸ë¡œë“¤ì–´ì˜¤ëŠ”ê±°ì§€");
				e.printStackTrace();
			}
			
		}
		
		int result = rService.modifyReview(review);
		if (result == 0) {
			return new ResponseEntity<Void>(HttpStatus.NOT_MODIFIED);
		}
		return new ResponseEntity<Void>(HttpStatus.OK);
	}
	
	
	@DeleteMapping("/delete/{reviewNo}")
	@ApiOperation(value="ë¦¬ë·° ì‚­ì œ")
	public ResponseEntity<Void> delete(@PathVariable int reviewNo){
		int result = rService.removeReview(reviewNo);
		if (result == 0) {
			return new ResponseEntity<Void>(HttpStatus.NOT_ACCEPTABLE);
		}
		return new ResponseEntity<Void>(HttpStatus.OK);
	}

}
```

<br>
<br>


### 6ï¸âƒ£ êµ¬í˜„í•œ RESTAPI ì„œë²„ì˜ ê° ê¸°ëŠ¥ë“¤ì„ Swagger-uië¥¼ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸í•œë‹¤.


<img src="https://github.com/jseok0917/jseok0917/assets/139304962/87a91b74-c2dc-43b5-9994-5f0135383c81" style="width : 300px;" />
<img src="https://github.com/jseok0917/jseok0917/assets/139304962/7e828bbf-8159-4358-ad22-1cda173d3d86" style="width : 300px;" />

<br>
<br>

### 7ï¸âƒ£ JWTë¥¼ ì´ìš©í•˜ì—¬ í† í°ì„ ì´ìš©í•œ ë¡œê·¸ì¸ ì¸ì¦ ê¸°ëŠ¥ê³¼ ì¸í„°ì…‰í„°ë¥¼ êµ¬í˜„í•œë‹¤.

  ğŸŸ¢ í† í° ìƒì„±ê³¼ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìœ„í•œ JwtUtil í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•œë‹¤.

```java
@Component
public class JwtUtil {
	
	private static final String SALT = "SSAFIT";
	
	
	//í† í° ìƒì„± ë©”ì„œë“œ
	//ë°ì´í„°ê°€ í•˜ë‚˜ë§Œ ì¸ìë¡œ ë“¤ì–´ì˜¨ë‹¤ë¼ê³  ê°€ì •í•˜ê³  / í…ŒìŠ¤íŠ¸ì— ë°©í•´ê°€ ë˜ëŠ” ìœ íš¨ê¸°ê°„ ì œê±°
	public String createToken(String key, String value) throws UnsupportedEncodingException {
		return Jwts.builder()
				.setHeaderParam("alg", "HS256")
				.setHeaderParam("typ", "JWT") //í—¤ë”ì™„ë£Œ	
				.claim(key, value)
				.setExpiration(new Date(System.currentTimeMillis()+36000000)) //ì„¸ì…˜ ë§Œë£Œì‹œê°„ 10ì‹œê°„
				.signWith(SignatureAlgorithm.HS256, SALT.getBytes("UTF-8")) //ì„œëª…ì™„ë£Œ
				.compact();
	}
		
	//í† í° ìœ íš¨ì„± ê²€ì‚¬ ë©”ì„œë“œ
	public void valid(String token) throws Exception {
		Jwts.parser().setSigningKey(SALT.getBytes("UTF-8")).parseClaimsJws(token);
	}
}

```

<br>
<br>

  ğŸŸ¢ UserControllerë¥¼ ì‘ì„±í•˜ì—¬ ë¡œê·¸ì¸ ì‹œ JwtUtilì„ í™œìš©í•˜ì—¬ Tokenì„ ìƒì„±í•´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤.
  í´ë¼ì´ì–¸íŠ¸ì—ì„œ í˜ì´ì§€ ì „í™˜ì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ ì„œë²„ë¡œ í† í°ì„ ì „ë‹¬í•˜ì—¬ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ë„ë¡ êµ¬í˜„í•œë‹¤.

```java
//UserController
@RestController
@RequestMapping("/api/user")
@Api(tags="ìœ ì € ì»¨íŠ¸ë¡¤ëŸ¬")
@CrossOrigin("*")
public class UserController  {
	
	@Autowired
	private GymService vService;
	
	@Autowired
	private UserService uService;
	
	@Autowired
	private ReviewService rService;
	
	//ë¡œê·¸ì¸ í† í° ìƒì„±ìš©
	@Autowired
	private JwtUtil jwtUtil;
	
	private static final String HEADER_AUTH = "access-token";

	//=======================ìœ ì €íŒŒíŠ¸ CURD êµ¬í˜„===========================
	@GetMapping("/{userId}")
	@ApiOperation(value="ìœ ì € ì •ë³´ ì¡°íšŒ")
	public ResponseEntity<?> list(@PathVariable String userId){
		User user = uService.getUser(userId);
		user.setPassword("*");
		if (user == null) {
			return new ResponseEntity<Void>(HttpStatus.NO_CONTENT);			
		}
		return new ResponseEntity<User>(user, HttpStatus.OK);
	}

	
	@PostMapping("/login")
	@ApiOperation(value="ë¡œê·¸ì¸")
	public ResponseEntity<?> login(@RequestBody User user) {
		User selectedUser = uService.getUser(user.getUserId());
		if (selectedUser == null) {
			return new ResponseEntity<String>("", HttpStatus.OK);
		} 
		
		if (selectedUser.getPassword().equals(user.getPassword())) {
			try {
				//ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í† í°ì„ ì „ì†¡
				return new ResponseEntity<String>(jwtUtil.createToken("userId", user.getUserId()), HttpStatus.OK);
			} catch (UnsupportedEncodingException e) {
				String msg = "í† í° ìƒì„± ì‹œ ì¸ì½”ë”© ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.";
				return new ResponseEntity<String>(msg, HttpStatus.OK);
			}
		}
		
		return new ResponseEntity<String>("", HttpStatus.OK);
		
	}
	
  //í† í° ìœ íš¨ì„± ê²€ì‚¬
	@GetMapping("/validation")
	@ApiOperation(value="ìœ íš¨ì„± ê²€ì‚¬")
	public ResponseEntity<Boolean> validate(@RequestParam String token){
		
		
		if(token != null) {
			try {
				jwtUtil.valid(token);
				return new ResponseEntity<Boolean>(true, HttpStatus.OK);
			} catch (Exception e) {
				return new ResponseEntity<Boolean>(false, HttpStatus.OK);
			}
		}
		
		
		return new ResponseEntity<Boolean>(false, HttpStatus.OK);
	}
	
}

```

<br>
<br>

  ğŸŸ¢ ë¡œê·¸ì¸ ì¸í„°ì…‰í„° ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë„ë¡ 
  WebConfigì— ì¸í„°ì…‰í„° ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.

```java
//WebConfig ì¸í„°ì…‰í„° ì„¤ì • ì½”ë“œ
	@Override
	public void addInterceptors(InterceptorRegistry registry) {
		registry.addInterceptor(jwtInterceptor)
				.addPathPatterns("/**")
				.excludePathPatterns("/api/user/login");
	}	
```
<br>
<br>

  ğŸŸ¢ ë¡œê·¸ì¸ ì¸í„°ì…‰í„°ë¥¼ êµ¬í˜„í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ìš”ì²­ì„ ë°›ì„ ë•Œë§ˆë‹¤ í† í°ì„ ì „ë‹¬ë°›ì•„ 
  ìœ íš¨í•˜ì§€ì•Šì€ í† í°ì¼ ê²½ìš° falseë¥¼ ë°˜í™˜í•œë‹¤. 

```java
@Component
public class JwtInterceptor implements HandlerInterceptor{
	private static final String HEADER_AUTH = "access-token";
	
	
	//ì¸í„°ì…‰í„°ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì„ ê²½ìš°ì— ì‘ìš©
	@Autowired
	private JwtUtil jwtUtil;
	
	@Override
	public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {

		String token = request.getHeader(HEADER_AUTH);
		
		if(token != null) {
			try {
				jwtUtil.valid(token);
				return true;
			} catch (Exception e) {
				// TODO Auto-generated catch block
				return false;
			}
		}
		return false;
		
		
	}
}
```

<br>
<br>

### 8ï¸âƒ£ ìœ ì € RESTAPIì˜ ì‘ë™ì— ë¬¸ì œê°€ ì—†ëŠ”ì§€ í”„ë¡ íŠ¸ì—”ë“œì™€ í˜‘ì—…í•˜ì—¬ ê²€ì¦í•œë‹¤.

<img src="https://github.com/jseok0917/jseok0917/assets/139304962/1020e620-8766-40ad-8931-0089890c8ce6" style="width : 300px;" />

<br>
<hr>
<br>






